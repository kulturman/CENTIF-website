<div (click)="showMobileMenu=false" [class.visible]="showMobileMenu" class="backdrop"></div>
<nav class="navbar">
  <div class="navbar-header">
    <button
      (click)="toggleMobileMenu()"
      type="button" class="navbar-toggle collapsed" data-toggle="collapse" aria-expanded="false"
    >
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
    </button>
  </div>
  <div class="collapse navbar-collapse">
    <ul class="nav navbar-nav">
      <li
        (mouseleave)="selectMenu(null)"
        (mouseenter)="selectMenu(index)" class="dropdown" *ngFor="let menuItem of menu; let index = index">
        <a routerLink="{{menuItem.link}}"
           class="dropdown-toggle"
           data-toggle="dropdown"
           role="button" aria-haspopup="true" aria-expanded="false">
           {{menuItem.text}}
            <span class="caret" *ngIf="menuItem.children"></span>
            <ul class="dropdown-menu" [ngClass]="{'active': selectedMenu === index}">
              <li *ngFor="let children of menuItem.children">
                <a routerLink="{{children.link}}">
                  {{children.text}}
                </a>
              </li>
            </ul>
        </a>
      </li>
    </ul>
  </div>
</nav>

<app-mobile-menu (onMenuItemLinkClick)="showMobileMenu=false" [show]="showMobileMenu" [menu]="menu"></app-mobile-menu>
